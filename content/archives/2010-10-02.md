---
title: 为什么寄存器比内存快
date: 2010-10-02
tags: 
---

计算机的存储层次（memory hierarchy）之中，寄存器（register）最快，内存其次，最慢的是硬盘。

![存储层次.png][1]

<!--more-->

寄存器的工作方式很简单，只有两步：

```
（1）找到相关的位
（2）读取这些位
```

内存的工作方式就要复杂得多：

```
（1）找到数据的指针。指针可能存放在寄存器内，所以这一步就已经包括寄存器的全部工作了。
（2）将指针送往内存管理单元（MMU），由MMU将虚拟的内存地址翻译成实际的物理地址。
（3）将物理地址送往内存控制器（memory controller），由内存控制器找出该地址在哪一根内存插槽（bank）上。
（4）确定数据在哪一个内存块（chunk）上，从该块读取数据。
（5）数据先送回内存控制器，再送回 CPU，然后开始使用。
```

内存的工作流程比寄存器多出许多步。每一步都会产生延迟，累积起来就使得内存比寄存器慢得多。

为了缓解寄存器与内存之间的巨大速度差异，硬件设计师做出了许多努力，包括在 CPU 内部设置缓存、优化 CPU 工作方式，尽量一次性从内存读取指令所要用到的全部数据等等。

  [1]: http://70data.net/usr/uploads/2015/09/3961202427.png
