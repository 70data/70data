<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="842px" preserveAspectRatio="none" style="width:1093px;height:842px;" version="1.1" viewBox="0 0 1093 842" width="1093px" zoomAndPan="magnify"><defs><filter height="300%" id="faaxcmrssfyxv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="507.5" cy="20" fill="#000000" filter="url(#faaxcmrssfyxv)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#faaxcmrssfyxv)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="445" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="455" y="71.6016">Machine controller</text><rect fill="#FEFECE" filter="url(#faaxcmrssfyxv)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="261" x="377" y="148.1328"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="241" x="387" y="169.7344">Machine controller enqueues a Create call</text><polygon fill="#FEFECE" filter="url(#faaxcmrssfyxv)" points="430,202.2656,585,202.2656,597,214.2656,585,226.2656,430,226.2656,418,214.2656,430,202.2656" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="155" x="430" y="218.4229">Cluster has ready annotation</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="400" y="211.9453">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="597" y="211.9453">no</text><polygon fill="#FEFECE" filter="url(#faaxcmrssfyxv)" points="127,236.2656,291,236.2656,303,248.2656,291,260.2656,127,260.2656,115,248.2656,127,236.2656" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="164" x="127" y="252.4229">Machine has control plane role</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="97" y="245.9453">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="303" y="245.9453">no</text><rect fill="#ADD8E6" filter="url(#faaxcmrssfyxv)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="190" x="10" y="270.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="170" x="20" y="291.8672">Join as control plane member</text><rect fill="#ADD8E6" filter="url(#faaxcmrssfyxv)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="245.5" y="270.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="115" x="255.5" y="291.8672">Join as worker node</text><polygon fill="#FEFECE" filter="url(#faaxcmrssfyxv)" points="209,310.3984,221,322.3984,209,334.3984,197,322.3984,209,310.3984" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#faaxcmrssfyxv)" points="724,236.2656,888,236.2656,900,248.2656,888,260.2656,724,260.2656,712,248.2656,724,236.2656" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="164" x="724" y="252.4229">Machine has control plane role</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="694" y="245.9453">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="900" y="245.9453">no</text><rect fill="#ADD8E6" filter="url(#faaxcmrssfyxv)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="205" x="527.5" y="270.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="185" x="537.5" y="291.8672">Create control plane config map</text><polygon fill="#FEFECE" filter="url(#faaxcmrssfyxv)" points="523.5,339.3984,736.5,339.3984,748.5,351.3984,736.5,363.3984,523.5,363.3984,511.5,351.3984,523.5,339.3984" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="213" x="523.5" y="355.5557">Control plane config map already exists</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="493.5" y="349.0781">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="748.5" y="349.0781">no</text><rect fill="#FFC0CB" filter="url(#faaxcmrssfyxv)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="430.5" y="373.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="122" x="440.5" y="395">Return RequeueError</text><rect fill="#ADD8E6" filter="url(#faaxcmrssfyxv)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="700.5" y="373.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="710.5" y="395">Init control plane</text><rect fill="#ADD8E6" filter="url(#faaxcmrssfyxv)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="245" x="636" y="427.5313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="225" x="646" y="449.1328">Set ready status on Machine annotation</text><rect fill="#ADD8E6" filter="url(#faaxcmrssfyxv)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="211" x="653" y="481.6641"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="191" x="663" y="503.2656">Patch Machine back to API server</text><polygon fill="#FEFECE" filter="url(#faaxcmrssfyxv)" points="630,521.7969,642,533.7969,630,545.7969,618,533.7969,630,521.7969" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FFC0CB" filter="url(#faaxcmrssfyxv)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="911" y="270.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="122" x="921" y="291.8672">Return RequeueError</text><polygon fill="#FEFECE" filter="url(#faaxcmrssfyxv)" points="806,551.7969,818,563.7969,806,575.7969,794,563.7969,806,551.7969" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#faaxcmrssfyxv)" points="507.5,581.7969,519.5,593.7969,507.5,605.7969,495.5,593.7969,507.5,581.7969" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#faaxcmrssfyxv)" points="507.5,104.1328,519.5,116.1328,507.5,128.1328,495.5,116.1328,507.5,104.1328" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#faaxcmrssfyxv)" points="426.5,625.7969,588.5,625.7969,600.5,637.7969,588.5,649.7969,426.5,649.7969,414.5,637.7969,426.5,625.7969" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="426.5" y="641.9541">Create returned RequeueError</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="600.5" y="635.4766">yes</text><polygon fill="#FEFECE" filter="url(#faaxcmrssfyxv)" points="449.5,691.0723,565.5,691.0723,577.5,703.0723,565.5,715.0723,449.5,715.0723,437.5,703.0723,449.5,691.0723" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="449.5" y="707.2295">Create returned error</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="419.5" y="700.752">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="577.5" y="700.752">no</text><rect fill="#FFC0CB" filter="url(#faaxcmrssfyxv)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="316.75" y="725.0723"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="131" x="326.75" y="746.6738">Error creating machine</text><rect fill="#ADD8E6" filter="url(#faaxcmrssfyxv)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="270" x="487.75" y="725.0723"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="250" x="497.75" y="746.6738">Machine has initialized or joined the cluster</text><polygon fill="#FEFECE" filter="url(#faaxcmrssfyxv)" points="507.5,765.2051,519.5,777.2051,507.5,789.2051,495.5,777.2051,507.5,765.2051" style="stroke: #A80036; stroke-width: 1.5;"/><ellipse cx="507.5" cy="820.2051" fill="#FFFFFF" filter="url(#faaxcmrssfyxv)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="507.5" cy="820.2051" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.5" x2="507.5" y1="30" y2="50"/><polygon fill="#A80036" points="503.5,40,507.5,50,511.5,40,507.5,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="115" x2="105" y1="248.2656" y2="248.2656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="105" x2="105" y1="248.2656" y2="270.2656"/><polygon fill="#A80036" points="101,260.2656,105,270.2656,109,260.2656,105,264.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="303" x2="313" y1="248.2656" y2="248.2656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="313" x2="313" y1="248.2656" y2="270.2656"/><polygon fill="#A80036" points="309,260.2656,313,270.2656,317,260.2656,313,264.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="105" x2="105" y1="304.3984" y2="322.3984"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="105" x2="197" y1="322.3984" y2="322.3984"/><polygon fill="#A80036" points="187,318.3984,197,322.3984,187,326.3984,191,322.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="313" x2="313" y1="304.3984" y2="322.3984"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="313" x2="221" y1="322.3984" y2="322.3984"/><polygon fill="#A80036" points="231,318.3984,221,322.3984,231,326.3984,227,322.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="758.5" x2="758.5" y1="407.5313" y2="427.5313"/><polygon fill="#A80036" points="754.5,417.5313,758.5,427.5313,762.5,417.5313,758.5,421.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="758.5" x2="758.5" y1="461.6641" y2="481.6641"/><polygon fill="#A80036" points="754.5,471.6641,758.5,481.6641,762.5,471.6641,758.5,475.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="511.5" x2="501.5" y1="351.3984" y2="351.3984"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="501.5" x2="501.5" y1="351.3984" y2="373.3984"/><polygon fill="#A80036" points="497.5,363.3984,501.5,373.3984,505.5,363.3984,501.5,367.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="748.5" x2="758.5" y1="351.3984" y2="351.3984"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="758.5" x2="758.5" y1="351.3984" y2="373.3984"/><polygon fill="#A80036" points="754.5,363.3984,758.5,373.3984,762.5,363.3984,758.5,367.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="501.5" x2="501.5" y1="407.5313" y2="533.7969"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="501.5" x2="618" y1="533.7969" y2="533.7969"/><polygon fill="#A80036" points="608,529.7969,618,533.7969,608,537.7969,612,533.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="758.5" x2="758.5" y1="515.7969" y2="533.7969"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="758.5" x2="642" y1="533.7969" y2="533.7969"/><polygon fill="#A80036" points="652,529.7969,642,533.7969,652,537.7969,648,533.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="630" x2="630" y1="304.3984" y2="339.3984"/><polygon fill="#A80036" points="626,329.3984,630,339.3984,634,329.3984,630,333.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="712" x2="630" y1="248.2656" y2="248.2656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="630" x2="630" y1="248.2656" y2="270.2656"/><polygon fill="#A80036" points="626,260.2656,630,270.2656,634,260.2656,630,264.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="900" x2="982" y1="248.2656" y2="248.2656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="982" x2="982" y1="248.2656" y2="270.2656"/><polygon fill="#A80036" points="978,260.2656,982,270.2656,986,260.2656,982,264.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="630" x2="630" y1="545.7969" y2="563.7969"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="630" x2="794" y1="563.7969" y2="563.7969"/><polygon fill="#A80036" points="784,559.7969,794,563.7969,784,567.7969,788,563.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="982" x2="982" y1="304.3984" y2="563.7969"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="982" x2="818" y1="563.7969" y2="563.7969"/><polygon fill="#A80036" points="828,559.7969,818,563.7969,828,567.7969,824,563.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="418" x2="209" y1="214.2656" y2="214.2656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="209" x2="209" y1="214.2656" y2="236.2656"/><polygon fill="#A80036" points="205,226.2656,209,236.2656,213,226.2656,209,230.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="597" x2="806" y1="214.2656" y2="214.2656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="806" x2="806" y1="214.2656" y2="236.2656"/><polygon fill="#A80036" points="802,226.2656,806,236.2656,810,226.2656,806,230.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="209" x2="209" y1="334.3984" y2="593.7969"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="209" x2="495.5" y1="593.7969" y2="593.7969"/><polygon fill="#A80036" points="485.5,589.7969,495.5,593.7969,485.5,597.7969,489.5,593.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="806" x2="806" y1="575.7969" y2="593.7969"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="806" x2="519.5" y1="593.7969" y2="593.7969"/><polygon fill="#A80036" points="529.5,589.7969,519.5,593.7969,529.5,597.7969,525.5,593.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.5" x2="507.5" y1="182.2656" y2="202.2656"/><polygon fill="#A80036" points="503.5,192.2656,507.5,202.2656,511.5,192.2656,507.5,196.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.5" x2="507.5" y1="128.1328" y2="148.1328"/><polygon fill="#A80036" points="503.5,138.1328,507.5,148.1328,511.5,138.1328,507.5,142.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="600.5" x2="1067" y1="637.7969" y2="637.7969"/><polygon fill="#A80036" points="1063,394.4648,1067,384.4648,1071,394.4648,1067,390.4648" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1067" x2="1067" y1="116.1328" y2="637.7969"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1067" x2="519.5" y1="116.1328" y2="116.1328"/><polygon fill="#A80036" points="529.5,112.1328,519.5,116.1328,529.5,120.1328,525.5,116.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.5" x2="507.5" y1="605.7969" y2="625.7969"/><polygon fill="#A80036" points="503.5,615.7969,507.5,625.7969,511.5,615.7969,507.5,619.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.5" x2="507.5" y1="84.1328" y2="104.1328"/><polygon fill="#A80036" points="503.5,94.1328,507.5,104.1328,511.5,94.1328,507.5,98.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="437.5" x2="392.25" y1="703.0723" y2="703.0723"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="392.25" x2="392.25" y1="703.0723" y2="725.0723"/><polygon fill="#A80036" points="388.25,715.0723,392.25,725.0723,396.25,715.0723,392.25,719.0723" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="577.5" x2="622.75" y1="703.0723" y2="703.0723"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="622.75" x2="622.75" y1="703.0723" y2="725.0723"/><polygon fill="#A80036" points="618.75,715.0723,622.75,725.0723,626.75,715.0723,622.75,719.0723" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="392.25" x2="392.25" y1="759.2051" y2="777.2051"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="392.25" x2="495.5" y1="777.2051" y2="777.2051"/><polygon fill="#A80036" points="485.5,773.2051,495.5,777.2051,485.5,781.2051,489.5,777.2051" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="622.75" x2="622.75" y1="759.2051" y2="777.2051"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="622.75" x2="519.5" y1="777.2051" y2="777.2051"/><polygon fill="#A80036" points="529.5,773.2051,519.5,777.2051,529.5,781.2051,525.5,777.2051" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.5" x2="507.5" y1="649.7969" y2="691.0723"/><polygon fill="#A80036" points="503.5,681.0723,507.5,691.0723,511.5,681.0723,507.5,685.0723" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="511.5" y="671.252">no</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.5" x2="507.5" y1="789.2051" y2="809.2051"/><polygon fill="#A80036" points="503.5,799.2051,507.5,809.2051,511.5,799.2051,507.5,803.2051" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml cluster-admission-machine-controller

start;
:Machine controller;

repeat
  :Machine controller enqueues a Create call;
  if (Cluster has ready annotation) then (yes)
    if (Machine has control plane role) then (yes)
      #LightBlue:Join as control plane member;
    else (no)
      #LightBlue:Join as worker node;
    endif
  else (no)
    if (Machine has control plane role) then (yes)
      #LightBlue:Create control plane config map;
      if (Control plane config map already exists) then (yes)
        #Pink:Return RequeueError;
      else (no)
        #LightBlue:Init control plane;
        #LightBlue:Set ready status on Machine annotation;
        #LightBlue:Patch Machine back to API server;
      endif
    else (no)
      #Pink:Return RequeueError;
    endif
  endif
repeat while (Create returned RequeueError) is (yes)
-> no;
if (Create returned error) then (yes)
  #Pink:Error creating machine;
else (no)
  #LightBlue:Machine has initialized or joined the cluster;
endif
stop;

@enduml

PlantUML version 1.2019.06(Fri May 24 12:10:25 CDT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Mac OS X
OS Version: 10.14.5
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>