<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>TCPCopy on 千夜同学</title>
    <link>http://70data.net/tags/TCPCopy.html</link>
    <description>Recent content in TCPCopy on 千夜同学</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Thu, 18 Jun 2015 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="http://70data.net/tags/TCPCopy/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>TCPCopy 常见问题</title>
      <link>http://70data.net/archives/2015-06-18.html</link>
      <pubDate>Thu, 18 Jun 2015 00:00:00 +0000</pubDate>
      
      <guid>http://70data.net/archives/2015-06-18.html</guid>
      <description>&lt;p&gt;TCPCopy 常见问题:
出现 timeout 或者是频繁丢包&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sysctl -w net.core.rmem_max=131071
sysctl -w net.core.wmem_max=131071
sysctl -p
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;虚拟机使用 ab 测试的结果
会有包堆积的情况 不会马上处理 在 ab 测试数据跑完后 依然在处理数据包&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;10000    100    缺包不明显
10000    500    出现 ack 处理异常 缺包不明显
10000    1000   出现 ack 处理异常 缺包不明显 有内存堆积不到 1MB 
10000    2000   出现 ack 处理异常 缺包明显 3000 左右 有内存堆积 11MB
20000    500    出现 ack 处理异常 缺包不明显 有内存堆积 11MB
20000    1000   出现 ack 处理异常 缺包明显 13000 左右 有内存堆积 21MB
20000    2000   出现 ack 处理异常 缺包明显 13000 左右 有内存堆积 28MB
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>使用 TCPCopy 做引流测试</title>
      <link>http://70data.net/archives/2015-06-17.html</link>
      <pubDate>Wed, 17 Jun 2015 00:00:00 +0000</pubDate>
      
      <guid>http://70data.net/archives/2015-06-17.html</guid>
      <description>&lt;p&gt;&lt;img src=&#34;http://70data.net/usr/uploads/2015/07/913137337.png&#34; alt=&#34;tcpcopy结构.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;TCPCopy 默认从 IP 层抓包，从 IP 层发包，我们在测试服务器进行响应包的截获，并通过 intercept 程序返回响应包的必要信息给 TCPCopy。&lt;/p&gt;
&lt;p&gt;在线上要引流的机器和测试机分别安装 TCPCopy，版本 tcpcopy-0.9.6.tar.gz&lt;/p&gt;
&lt;p&gt;然后&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;configure
make
make install
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
  </channel>
</rss>